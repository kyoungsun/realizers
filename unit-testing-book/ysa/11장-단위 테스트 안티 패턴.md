# 11장-단위 테스트 안티 패턴

## 11.1 비공개 메서드 단위 테스트

- 전혀 하지 말아야 한다.

### 11.1. 비공개 메서드와 테스트 취약성

- 테스트 대상은 식벽할 수 있는 동작
- 비공개 메서드를 노출하면 테스트가 구현 세부사항과 결합
- 포괄적인 식별할 수 있는 동작으로 간접적으로 테스트하기

### 11.1.2 비공개 메서드와 불필요한 커버리지

- 비공개 메서드가 너무 복잡하면 별도의 클래스로 도출

### 11.1.3 비공개 메서드 테스트가 타당한 경우

- 메서드가 비공개이면서 식별할 수 있는 동작인 경우??

## 11.2 비공개 상태 노출

- 단위테스트를 위해 비공개 상태를 노출하지 말라
- 테스트를 위해 공개 API 노출 영역을 넓히는 것은 좋지 않은 습관

## 11.3 테스트로 유출된 도메인 지식

- 도메인 지식을 테스트로 유출하지 말라 (블랙박스 관점)
- 제품코드의 알고리즘 구현을 복사해서 테스트하지 말라
- 단위테스트에서 예상결과는 하드코딩하는 것이 좋다.

## 11.4 코드 오염

- 테스트를 위해 제품 코드를 추가하지 말라
- 테스트 코드와 제품 코드가 혼재돼 유지비가 증가 한다.

## 11.5 구체 클래스를 목으로 처리하기

- 단일책임 원칙 위배
- 구체 클래스 대신 인터페이스에 목을 사용할 것 (프로세스 외부 의존성과 도메인 로직 클래스 반드시 분리)

## 11.6 시간 처리하기

- 명시적인 의존성으로 시간을 주입할것
- 비지니스 연산을 시작할때 서비스로 시간을 주입한 다음 나머지연산은 값으로 전달

## 11.7 결론