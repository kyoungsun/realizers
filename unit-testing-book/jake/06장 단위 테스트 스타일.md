# 6장 단위 테스트 스타일

**세가지 스타일**

- 출력기반 테스트
    - 해당스타일은 함수형이라고도 하며 사이드 이펙트 없는 코드 선호를 강조하는 함수형 프로그래밍 방식에 뿌리를 두고있다.
- 상태기반 테스트
    - 작업이 완료된 후 시스템 상태를 확인하는것
- 통신기반 테스트
    - 목을 이용해 테스트 ㅐ대상 시스템과 협력자 간의 통신을 검증

**회기 방지 지표는 세가지 특성으로 결정된다**

- 테스트 중에 실행되는 코드의 양
- 코드 복잡도
- 도메인 유의성

**상태기반 테스트는 훨씬 많은 데이터를 확인해야 할때가 많으므로 검증 크기가 커질수 있다.**

**함수형프로그래밍**

메서드가 수학적 함수인지 판별하는 가장 좋은 방법은 프로그램의 동작을 변경하지 않고 해당 메서드에 대한 호출을 반환 값으로 대체 할수있는지 확인하는것.

**함수형 아키텍처와 육각형 아키텍처 비교**

관심사 분리라는 아이디어를 기반으로 한다.

의존성간의 단방향 흐름

다른점

사이드 이펙트에 대한 처리

함수형 아키텍처는 모든 사이드 이펙트를 분변 코에어서 비즈니스 연산 가장자리로 밀어내며 이 가장자리는 가변셀이 처리한다

육각형 아키텍처는 도메인 계층에 제한하는 한, 도메인 계층으로 인한 사이드 이펙트도 문제없다. 육각형 아키텍처의 모든 수정 사항은 도메인 계층 내에 있어야 하며, 계층의 경계를 넘어서는 안된다. 예를 들어 도메인 클래스 인스턴스는 데이터베이스에 직접 저장 할 수 없지만, 상태는 변경할 수 있다.

> 함수형 아키텍처는 육각형 아키텍처의 하위 집합이다. 극단적으로는 함수형 아키텍처를 육각형 아키텍처로 볼 수 있다.
